#! /usr/bin/env python
'''
Testing suite for timeclock.py
'''

import subprocess
import shlex
import sqlite3

def run_command(cmd):
    p = subprocess.Popen(shlex.split(cmd), shell=True, 
                         stdout=subprocess.PIPE, 
                         stderr=subprocess.STDOUT)
    return p.communicate()

with sqlite3.connect('../../data/timeclock_test.db') as conn:
    new_records= [('2014-03-03', '08:37:00', '13:01:00', '13:47:00', '17:30:00'),
                  ('2014-03-04', '08:41:00', '13:05:00', '13:41:00', '17:31:00'),
                  ('2014-03-05', '08:29:00', '13:02:00', '13:45:00', '17:32:00'),
                  ('2014-03-06', '08:15:00', '13:00:00', '13:51:00', '17:37:00'),
                  ('2014-03-07', '08:31:00', '13:06:00', '13:35:00', '17:33:00'),
                  ('2014-03-10', '08:30:00', '13:07:00', '13:52:00', '17:45:00'),
                  ('2014-03-11', '08:35:00', '13:00:00', '13:39:00', '17:33:00'),
                  ('2014-03-12', '08:45:00', '13:01:00', '13:47:00', '17:30:00'),
                  ('2014-03-13', '08:31:00', '13:03:00', '13:41:00', '17:41:00'),
                  ('2014-03-14', '08:24:00', '12:34:00', '13:22:00', '17:37:00'),
                  ('2014-03-17', '08:17:00', '12:01:00', '12:47:00', '18:00:00'),
                  ('2014-03-18', '08:00:00', '12:41:00', '13:15:00', '17:32:00'),
                  ('2014-03-19', '08:33:00', '12:45:00', '13:25:00', '17:00:00'),
                  ('2014-03-20', '08:38:00', '13:03:00', '13:47:00', '17:33:00'),
                  ('2014-03-21', '08:42:00', '13:00:00', '13:48:00', '17:31:00'),
                  ('2014-03-24', '08:45:00', '13:05:00', '13:55:00', '17:30:00'),
                  ('2014-03-25', '08:31:00', '13:01:00', '13:59:00', '17:30:00'),
                  ('2014-03-26', '08:29:00', '12:00:00', '12:45:00', '17:36:00'),
                  ('2014-03-27', '08:26:00', '13:01:00', '13:41:00', '17:38:00'),
                  ('2014-03-28', '08:33:00', '13:02:00', '13:37:00', '17:51:00'),
                  ('2014-03-31', '08:38:00', '12:50:00', '13:27:00', '17:40:00')]
    
    conn.execute('''
                 CREATE TABLE times (
                 date TEXT,
                 clockin TEXT,
                 lunchout TEXT,
                 lunchin TEXT,
                 clockout TEXT);
                 '''
                )
    
    conn.executemany('''INSERT INTO times
                        (date, clockin, lunchout, lunchin, clockout)
                        VALUES (?,?,?,?,?)''', new_records)


    conn.commit()
    conn.close()
